描画周りで下記の問題があるので改善策を立案してください。
立案された改善策を実行に移すための `.prompt.md` を出力してこのファイルと同じディレクトリに配置してください。


## 問題点
- 画面によって表示がブレる
  - 表示のロジックが統一されていないのでは?
- デザイン・レイアウトの要件を仕様自体が満たしていない
  - グリッドレイアウトなので、全体を適当なサイズの正方形で分割して、その中に当てはめるように配置されるべき。
  - ただし、下記を例外と認める
    - タイトルバー/ステータスバー
    - ボタンヒント
  - 上記例外に関しては文字の高さに合わせた領域を確保し、罫線を描画する
- ボタンヒントが物理ボタンの位置とあっていない
  - 逆に、位置があっていれば `A:` などの表記は不要


## 想定アクション

- 各画面の表示ロジックのうち、共通UI要素のコードを共通化する

## 仕様(再掲)

**UI/UX デザイン原則:**
- **デザインテーマ:** アンバーCRT風（黒/濃いグレー背景、アンバー系テキスト、フラッシュオレンジの警戒色、ネガポジ反転ハイライト）。
- **フォント:** M5Stack の標準フォントを `Font7` (最重要), `Font4` (重要), `Font2` (補助/ヒント) として使用。
- **レイアウト:** 全体的にグリッドレイアウトを意識し、要素を整然と配置。
- **データ永続化:**
    - SSID/パスワード、LCD明るさ、音/バイブレーション設定はFlashメモリに永続化。
    - **鳴動時刻データは永続化せず、電源オフでリセットされる揮発性データとする。**

**共通UI要素:**

1.  **タイトルバー/ステータスバー:**
    * **位置:** 画面の最上部。
    * **表示内容:** 左に**現在のモード名**（例: "MAIN", "SET TIME"）、右に**バッテリー残量アイコンとパーセンテージ**（例: "🔋 75%"）。充電中は充電アイコンを表示。
    * **色:** 補助的なアンバー。バッテリー残量20%以下でフラッシュオレンジに変化。
    * **サイズ:** Font2。

2.  **ボタンヒント:**
    * **位置:** 画面の最下部、それぞれの物理ボタンの真上。
    * **形式:** `[A: 〇〇] [B: 〇〇] [C: 〇〇]`。
    * **色:** 補助的なアンバー。
    * **サイズ:** Font2。