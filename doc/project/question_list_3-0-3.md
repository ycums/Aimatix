# 3-0-3 着手前 質問票（AI用）

この質問票は「3-0-3: 決め打ちで2分カウントダウンが走る」タスクに着手する前に、AIが必要な補足情報・仕様・完成条件・テスト基準などを確認するためのものです。各項目にチェックまたは記入をお願いします。

---

## 1. カウントダウン仕様・画面表示

- [x] カウントダウン開始条件（例：起動直後/ボタン操作/自動開始など）
  - [自由記述] : 起動直後
- [x] カウントダウン中のUI表示内容（残り時間・進捗バー・アラームリスト等）
  - [自由記述] : 
    - 現在時刻: 内部時計の現在の時刻
    - 残り時間
      - 直近のアラームまでの残り時間
    - プログレスバー
      - バーは右端から左端へ向かって縮小し、長さは「残り時間 ÷ 開始時点の残り時間」の割合で決まる。
    - アラームリストの消化
      - 1. 残り時間は直近のアラームまでの残り時間を表示する
      - 2. 残り時間が０になると、その項目はリストから除去される
      - 3. リストに項目があれば1に戻る。なければ停止する。
- [x] 残り時間の表示形式・位置（例：HH:MM:SS、中央寄せ、Font7等）
  - [自由記述] : 
    - HH:MM:SS
    - 表示位置、書式は現状を堅持。
- [x] プログレスバーの長さ・色・位置
  - [自由記述] :
    - バーは右端から左端へ向かって縮小し、長さは「残り時間 ÷ 開始時点の残り時間」の割合で決まる。
- [x] カウントダウン終了時の動作（アラーム鳴動・画面遷移・UI変化等）
  - [自由記述] :
    - `カウントダウン中のUI表示内容` を参照。
    - アラーム鳴動等は現時点では実装不要
      - ボタン操作時の挙動をまだ実装しないので、鳴動を解除できなくなるため。
- [x] ボタン操作時の挙動（A/B/C各ボタンの短押し・長押し時の仕様）
  - [自由記述] :
    - この時点では実装不要。

## 2. 実装・依存関係

- [x] TimeLogic/AlarmLogic仮実装で満たすべき要件（例：固定値返却/時刻進行/未実装でOK等）
  - [自由記述] : 時刻進行
- [x] M5Stack依存部のモック化・テスト方針（どこまでモックで良いか、実機確認の範囲）
  - [自由記述] : レンダリング結果が 実機確認 できるための最低限のもの以外はモックで良し。
- [x] UI/ロジック分離・責務分担の設計方針（UI層・ロジック層の役割分担）
  - [自由記述] : `doc/design/` に準じる。

## 3. 完成条件

- [x] 「2分カウントダウンが走る」とみなす基準（最低限必要なUI要素・動作、見た目の許容範囲）
  - [自由記述] :
    - 内部的に起動時にアラームリストを下記で埋めておき、最後の項目を消化した時点で正常停止すること。
      - +10秒
      - +30秒
      - +1分
      - +2分
- [ ] 実機での動作確認以外に必要な検証項目があるか
  - [自由記述] : テスト基準を満たすこと。

## 4. テスト基準

- [x] テスト（native/unit/integration等）はこの段階で必要か
  - [ ] 必要
  - [ ] 不要
  - [自由記述] : native のみ必須
- [x] カバレッジ計測やCI/CD連携はこの段階で必要か
  - [ ] 必要
  - [ ] 不要
  - [自由記述] : カバレッジ計測が必須
- [x] テスト・カバレッジの合格基準（例：80%以上、scripts/test_coverage.py --quickの水準等）
  - [自由記述] : coverage_config.json に設定されたゲート基準を `--quick` モードで満たすこと。

## 5. その他・補足

- [x] その他、AIに伝えておきたいこと・注意点
  - [自由記述] :
    - 各種コマンド
      - native テスト実行: `pio test -e native` 
        - フィルタするときは  `pio test -e native -f pure/test_xxxx_pure`
      - ビルド: `pio run`
      - 実機転送: `pio run -t upload` 

---

※ご回答後、AIが要件を整理し、実装・テスト計画を提案します。 