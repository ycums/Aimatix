# テストケース設計方針（Unit/Integration）

本ドキュメントは、AimatixプロジェクトにおけるUnit Test・Integration Testのテストケース設計方針・例を明文化するものです。

---

## 1. 基本方針

- **Unit Test**：純粋ロジック層（TimeLogic, AlarmLogic, InputLogic, SettingsLogic等）の単体テスト
  - モック（test/mock/）を活用し、ハード依存・副作用を完全排除
  - 各ロジックの正常系・異常系・境界値・例外パスを網羅
- **Integration Test**：複数モジュール連携やUI層～ロジック層～アダプタ層の結合テスト
  - DIで本番アダプタ/モックアダプタを切替
  - 状態遷移・副作用（コマンド/イベント）・画面遷移の一貫性を検証

---

## 2. テストケース例

### 【Unit Test例】

#### TimeLogic
- setCurrentTime/getCurrentTimeの正常動作
- addMinutesによる時刻加算（繰り上がり/繰り下がり含む）
- isBeforeの比較ロジック
- formatTimeの出力形式

#### AlarmLogic
- アラーム追加・削除・重複拒否・最大件数超過
- 鳴動判定（現在時刻との比較）
- アラームリストの自動ソート・自動削除

#### InputLogic
- 入力値のバリデーション（範囲外/桁数不足/正常値）
- 入力クリア・編集操作
- 桁送り機能（成功/失敗・境界値・部分入力状態）
  - 正常な桁送り（右から左、3→2→1→0）
  - 全桁入力済み時の拒絶（99:99）
  - 部分入力状態での桁送り
  - 未入力状態での桁送り

#### SettingsLogic
- 設定値のロード・保存・リセット
- バリデーション（不正値/正常値）
- 永続化（MockEEPROMAdapter利用）

---

### 【Integration Test例】

- UI層からの一連の操作（ボタン押下→状態遷移→コマンド/イベント発行→副作用実行）の流れ
- 状態遷移テーブル（state_transition.md）に基づく全モード・全イベントの遷移網羅
- コマンド/イベントリストの内容検証（例：SaveSettingsコマンド発行時にMockEEPROMAdapterへ正しく保存されるか）
- エラー発生時のUI警告表示・復旧動作

---

## 3. 補足
- テストケースは「正常系・異常系・境界値・例外パス」を網羅的に設計
- 実装・テスト段階で追加・修正が必要な場合は本ドキュメントを随時更新 